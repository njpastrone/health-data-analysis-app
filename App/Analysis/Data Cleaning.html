<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Preliminary Data Cleaning for Healthcare Data Analysis App</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Data Cleaning_files/libs/clipboard/clipboard.min.js"></script>
<script src="Data Cleaning_files/libs/quarto-html/quarto.js"></script>
<script src="Data Cleaning_files/libs/quarto-html/popper.min.js"></script>
<script src="Data Cleaning_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Data Cleaning_files/libs/quarto-html/anchor.min.js"></script>
<link href="Data Cleaning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Data Cleaning_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Data Cleaning_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Data Cleaning_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Data Cleaning_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Preliminary Data Cleaning for Healthcare Data Analysis App</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="load-libraries-and-data" class="level2">
<h2 class="anchored" data-anchor-id="load-libraries-and-data">Load libraries and data</h2>
<div class="cell" data-show="false">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-show="false">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>initial_health_parameters <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/P_Data_Extract_From_Health_Nutrition_and_Population_Statistics (1).xlsx"</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">"Data"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>development_indicators <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/P_Initial Query Development Indicators Healthcare Data Analysis Project.xlsx"</span>, </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">"Data"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>education_indicators <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/P_Initial Query Education Statistics Healthcare Data Analysis Projects .xlsx"</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">"Data"</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>weight_indicators <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/P_Overweight and Underweight Children Healthcare Data Analysis.xlsx"</span>, </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sheet =</span> <span class="st">"Data"</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>life_exp <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/P_Data_Extract_From_Health_Nutrition_and_Population_Statistics_Life_Exp.xlsx"</span>, <span class="at">sheet =</span> <span class="st">'Data'</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>food_supply <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/global-food (1).csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="explore-data" class="level2">
<h2 class="anchored" data-anchor-id="explore-data">Explore data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>initial_health_parameters <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 68
  `Series Name`      `Series Code` `Country Name` `Country Code` `1960 [YR1960]`
  &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;          
1 Domestic private … SH.XPD.PVTD.… Afghanistan    AFG            ..             
2 Domestic private … SH.XPD.PVTD.… Africa Easter… AFE            ..             
3 Domestic private … SH.XPD.PVTD.… Africa Wester… AFW            ..             
4 Domestic private … SH.XPD.PVTD.… Albania        ALB            ..             
5 Domestic private … SH.XPD.PVTD.… Algeria        DZA            ..             
6 Domestic private … SH.XPD.PVTD.… American Samoa ASM            ..             
# ℹ 63 more variables: `1961 [YR1961]` &lt;chr&gt;, `1962 [YR1962]` &lt;chr&gt;,
#   `1963 [YR1963]` &lt;chr&gt;, `1964 [YR1964]` &lt;chr&gt;, `1965 [YR1965]` &lt;chr&gt;,
#   `1966 [YR1966]` &lt;chr&gt;, `1967 [YR1967]` &lt;chr&gt;, `1968 [YR1968]` &lt;chr&gt;,
#   `1969 [YR1969]` &lt;chr&gt;, `1970 [YR1970]` &lt;chr&gt;, `1971 [YR1971]` &lt;chr&gt;,
#   `1972 [YR1972]` &lt;chr&gt;, `1973 [YR1973]` &lt;chr&gt;, `1974 [YR1974]` &lt;chr&gt;,
#   `1975 [YR1975]` &lt;chr&gt;, `1976 [YR1976]` &lt;chr&gt;, `1977 [YR1977]` &lt;chr&gt;,
#   `1978 [YR1978]` &lt;chr&gt;, `1979 [YR1979]` &lt;chr&gt;, `1980 [YR1980]` &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>development_indicators <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 68
  `Country Name` `Country Code` `Series Name`      `Series Code` `1960 [YR1960]`
  &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;          
1 Afghanistan    AFG            GDP per capita, P… NY.GDP.PCAP.… ..             
2 Afghanistan    AFG            GDP, PPP (current… NY.GDP.MKTP.… ..             
3 Afghanistan    AFG            GNI, PPP (current… NY.GNP.MKTP.… ..             
4 Afghanistan    AFG            GNI per capita, P… NY.GNP.PCAP.… ..             
5 Afghanistan    AFG            Adjusted net nati… NY.ADJ.NNTY.… ..             
6 Afghanistan    AFG            Consumer price in… FP.CPI.TOTL   ..             
# ℹ 63 more variables: `1961 [YR1961]` &lt;chr&gt;, `1962 [YR1962]` &lt;chr&gt;,
#   `1963 [YR1963]` &lt;chr&gt;, `1964 [YR1964]` &lt;chr&gt;, `1965 [YR1965]` &lt;chr&gt;,
#   `1966 [YR1966]` &lt;chr&gt;, `1967 [YR1967]` &lt;chr&gt;, `1968 [YR1968]` &lt;chr&gt;,
#   `1969 [YR1969]` &lt;chr&gt;, `1970 [YR1970]` &lt;chr&gt;, `1971 [YR1971]` &lt;chr&gt;,
#   `1972 [YR1972]` &lt;chr&gt;, `1973 [YR1973]` &lt;chr&gt;, `1974 [YR1974]` &lt;chr&gt;,
#   `1975 [YR1975]` &lt;chr&gt;, `1976 [YR1976]` &lt;chr&gt;, `1977 [YR1977]` &lt;chr&gt;,
#   `1978 [YR1978]` &lt;chr&gt;, `1979 [YR1979]` &lt;chr&gt;, `1980 [YR1980]` &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>education_indicators <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 105
  `Country Name` `Country Code` Series             `Series Code` `1960 [YR1960]`
  &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;          
1 Afghanistan    AFG            Human Capital Ind… HD.HCI.LAYS   ..             
2 Afghanistan    AFG            Human Capital Ind… HD.HCI.LAYS.… ..             
3 Afghanistan    AFG            Human Capital Ind… HD.HCI.LAYS.… ..             
4 Albania        ALB            Human Capital Ind… HD.HCI.LAYS   ..             
5 Albania        ALB            Human Capital Ind… HD.HCI.LAYS.… ..             
6 Albania        ALB            Human Capital Ind… HD.HCI.LAYS.… ..             
# ℹ 100 more variables: `1961 [YR1961]` &lt;chr&gt;, `1962 [YR1962]` &lt;chr&gt;,
#   `1963 [YR1963]` &lt;chr&gt;, `1964 [YR1964]` &lt;chr&gt;, `1965 [YR1965]` &lt;chr&gt;,
#   `1966 [YR1966]` &lt;chr&gt;, `1967 [YR1967]` &lt;chr&gt;, `1968 [YR1968]` &lt;chr&gt;,
#   `1969 [YR1969]` &lt;chr&gt;, `1970 [YR1970]` &lt;chr&gt;, `1971 [YR1971]` &lt;chr&gt;,
#   `1972 [YR1972]` &lt;chr&gt;, `1973 [YR1973]` &lt;chr&gt;, `1974 [YR1974]` &lt;chr&gt;,
#   `1975 [YR1975]` &lt;chr&gt;, `1976 [YR1976]` &lt;chr&gt;, `1977 [YR1977]` &lt;chr&gt;,
#   `1978 [YR1978]` &lt;chr&gt;, `1979 [YR1979]` &lt;chr&gt;, `1980 [YR1980]` &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>weight_indicators <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 68
  `Series Name`      `Series Code` `Country Name` `Country Code` `1960 [YR1960]`
  &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;          
1 Prevalence of ove… SH.STA.OWAD.… Afghanistan    AFG            ..             
2 Prevalence of ove… SH.STA.OWAD.… Africa Easter… AFE            ..             
3 Prevalence of ove… SH.STA.OWAD.… Africa Wester… AFW            ..             
4 Prevalence of ove… SH.STA.OWAD.… Albania        ALB            ..             
5 Prevalence of ove… SH.STA.OWAD.… Algeria        DZA            ..             
6 Prevalence of ove… SH.STA.OWAD.… American Samoa ASM            ..             
# ℹ 63 more variables: `1961 [YR1961]` &lt;chr&gt;, `1962 [YR1962]` &lt;chr&gt;,
#   `1963 [YR1963]` &lt;chr&gt;, `1964 [YR1964]` &lt;chr&gt;, `1965 [YR1965]` &lt;chr&gt;,
#   `1966 [YR1966]` &lt;chr&gt;, `1967 [YR1967]` &lt;chr&gt;, `1968 [YR1968]` &lt;chr&gt;,
#   `1969 [YR1969]` &lt;chr&gt;, `1970 [YR1970]` &lt;chr&gt;, `1971 [YR1971]` &lt;chr&gt;,
#   `1972 [YR1972]` &lt;chr&gt;, `1973 [YR1973]` &lt;chr&gt;, `1974 [YR1974]` &lt;chr&gt;,
#   `1975 [YR1975]` &lt;chr&gt;, `1976 [YR1976]` &lt;chr&gt;, `1977 [YR1977]` &lt;chr&gt;,
#   `1978 [YR1978]` &lt;chr&gt;, `1979 [YR1979]` &lt;chr&gt;, `1980 [YR1980]` &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>food_supply <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 40
  Product Country      Year Population `Production (t)` production__tonnes__pe…¹
  &lt;lgl&gt;   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt; &lt;lgl&gt;            &lt;lgl&gt;                   
1 NA      Afghanistan  1961    8790140 NA               NA                      
2 NA      Afghanistan  1962    8969055 NA               NA                      
3 NA      Afghanistan  1963    9157463 NA               NA                      
4 NA      Afghanistan  1964    9355510 NA               NA                      
5 NA      Afghanistan  1965    9565154 NA               NA                      
6 NA      Afghanistan  1966    9783153 NA               NA                      
# ℹ abbreviated name: ¹​production__tonnes__per_capita
# ℹ 34 more variables: `Production per capita (kg)` &lt;lgl&gt;,
#   `Yield (t/ha)` &lt;lgl&gt;, `Yield (kg/animal)` &lt;lgl&gt;, `Land Use (ha)` &lt;lgl&gt;,
#   area_harvested__ha__per_capita &lt;lgl&gt;, `Land Use per capita (m²)` &lt;lgl&gt;,
#   `Producing or slaughtered animals` &lt;lgl&gt;,
#   `Producing or slaughtered animals per capita` &lt;lgl&gt;, `Imports (t)` &lt;lgl&gt;,
#   imports__tonnes__per_capita &lt;lgl&gt;, `Imports per capita (kg)` &lt;lgl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>life_exp <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 68
  `Series Name`      `Series Code` `Country Name` `Country Code` `1960 [YR1960]`
  &lt;chr&gt;              &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;          
1 Life expectancy a… SP.DYN.LE00.… Afghanistan    AFG            33.285         
2 Life expectancy a… SP.DYN.LE00.… Africa Easter… AFE            45.70738061146…
3 Life expectancy a… SP.DYN.LE00.… Africa Wester… AFW            39.38463801932…
4 Life expectancy a… SP.DYN.LE00.… Albania        ALB            57.78          
5 Life expectancy a… SP.DYN.LE00.… Algeria        DZA            43.608         
6 Life expectancy a… SP.DYN.LE00.… American Samoa ASM            ..             
# ℹ 63 more variables: `1961 [YR1961]` &lt;chr&gt;, `1962 [YR1962]` &lt;chr&gt;,
#   `1963 [YR1963]` &lt;chr&gt;, `1964 [YR1964]` &lt;chr&gt;, `1965 [YR1965]` &lt;chr&gt;,
#   `1966 [YR1966]` &lt;chr&gt;, `1967 [YR1967]` &lt;chr&gt;, `1968 [YR1968]` &lt;chr&gt;,
#   `1969 [YR1969]` &lt;chr&gt;, `1970 [YR1970]` &lt;chr&gt;, `1971 [YR1971]` &lt;chr&gt;,
#   `1972 [YR1972]` &lt;chr&gt;, `1973 [YR1973]` &lt;chr&gt;, `1974 [YR1974]` &lt;chr&gt;,
#   `1975 [YR1975]` &lt;chr&gt;, `1976 [YR1976]` &lt;chr&gt;, `1977 [YR1977]` &lt;chr&gt;,
#   `1978 [YR1978]` &lt;chr&gt;, `1979 [YR1979]` &lt;chr&gt;, `1980 [YR1980]` &lt;chr&gt;, …</code></pre>
</div>
</div>
</section>
<section id="clean-world-bank-data" class="level2">
<h2 class="anchored" data-anchor-id="clean-world-bank-data">Clean World Bank data</h2>
<section id="rename-column-in-education-statistics-to-make-it-consistent-with-other-queries" class="level3">
<h3 class="anchored" data-anchor-id="rename-column-in-education-statistics-to-make-it-consistent-with-other-queries">Rename column in education statistics to make it consistent with other queries</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>education_indicators <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span> <span class="ot">=</span> Series) <span class="ot">-&gt;</span> education_indicators</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reshape-data" class="level3">
<h3 class="anchored" data-anchor-id="reshape-data">Reshape data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>clean_years <span class="ot">&lt;-</span> <span class="cf">function</span>(dataset) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  dataset <span class="sc">|&gt;</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Code</span><span class="st">`</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span> <span class="fu">map_chr</span>(.x, <span class="sc">~</span> <span class="fu">str_extract</span>(.x, <span class="st">"</span><span class="sc">\\</span><span class="st">d{4}"</span>)), <span class="fu">everything</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(dataset <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Code</span><span class="st">`</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Series Code</span><span class="st">`</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="st">`</span><span class="at">1960</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">2023</span><span class="st">`</span>, <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"value"</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">year =</span> <span class="fu">as.numeric</span>(year),</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">value =</span> <span class="fu">as.numeric</span>(value)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_years</span>(initial_health_parameters) <span class="ot">-&gt;</span> cleaned_health_parameters</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_years</span>(development_indicators) <span class="ot">-&gt;</span> cleaned_development_indicators</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_years</span>(education_indicators) <span class="ot">-&gt;</span> cleaned_education_indicators</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_years</span>(weight_indicators) <span class="ot">-&gt;</span> cleaned_weight_indicators</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_years</span>(life_exp) <span class="ot">-&gt;</span> cleaned_life_exp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="bind-and-clean-world-bank-data" class="level2">
<h2 class="anchored" data-anchor-id="bind-and-clean-world-bank-data">Bind and clean World Bank data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>cleaned_health_parameters <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(cleaned_development_indicators) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(cleaned_education_indicators) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(cleaned_weight_indicators) <span class="sc">|&gt;</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(cleaned_life_exp) <span class="ot">-&gt;</span> wb_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="remove-false-parameters" class="level3">
<h3 class="anchored" data-anchor-id="remove-false-parameters">Remove false parameters</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>wb_data <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 41 × 1
   `Series Name`                                                                
   &lt;chr&gt;                                                                        
 1 Domestic private health expenditure per capita, PPP  (current international …
 2 Domestic general government health expenditure per capita, PPP (current inte…
 3 External health expenditure per capita, PPP (current international $)        
 4 Diabetes prevalence (% of population ages 20 to 79)                          
 5 Mortality from CVD, cancer, diabetes or CRD between exact ages 30 and 70 (%) 
 6 Mortality rate, infant (per 1,000 live births)                               
 7 Mortality rate, under-5 (per 1,000)                                          
 8 Population, total                                                            
 9 Population, male                                                             
10 Population, female                                                           
# ℹ 31 more rows</code></pre>
</div>
</div>
</section>
<section id="reshape-data-1" class="level3">
<h3 class="anchored" data-anchor-id="reshape-data-1">Reshape data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>wb_data <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span> <span class="sc">!=</span> <span class="st">"Last Updated: 07/01/2024"</span>, <span class="st">`</span><span class="at">Series Name</span><span class="st">`</span> <span class="sc">!=</span> <span class="st">"Data from database: Health Nutrition and Population Statistics"</span>, <span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Series Name</span><span class="st">`</span> )) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>, year), <span class="at">names_from =</span> <span class="st">`</span><span class="at">Series Name</span><span class="st">`</span>, <span class="at">values_from =</span> value) <span class="ot">-&gt;</span> wb_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="join-world-bank-and-food-supply-data" class="level2">
<h2 class="anchored" data-anchor-id="join-world-bank-and-food-supply-data">Join World Bank and Food Supply data</h2>
<section id="clean-food-supply-data" class="level3">
<h3 class="anchored" data-anchor-id="clean-food-supply-data">Clean Food Supply data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>food_supply <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Country, Year, <span class="st">`</span><span class="at">Food supply (kcal per capita per day)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Food supply (Protein g per capita per day)</span><span class="st">`</span>, <span class="st">`</span><span class="at">Food supply (Fat g per capita per day)</span><span class="st">`</span>) <span class="ot">-&gt;</span> food_supply</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="examine-sameness-of-country-columns" class="level3">
<h3 class="anchored" data-anchor-id="examine-sameness-of-country-columns">Examine sameness of country columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>food_supply <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  Country      Year Food supply (kcal per capita per da…¹ Food supply (Protein…²
  &lt;chr&gt;       &lt;dbl&gt;                                 &lt;dbl&gt;                  &lt;dbl&gt;
1 Afghanistan  1961                                 3055.                   86.5
2 Afghanistan  1962                                 2973.                   84.6
3 Afghanistan  1963                                 2752.                   78.7
4 Afghanistan  1964                                 3013.                   85.2
5 Afghanistan  1965                                 3018.                   85.6
6 Afghanistan  1966                                 2795.                   80.8
# ℹ abbreviated names: ¹​`Food supply (kcal per capita per day)`,
#   ²​`Food supply (Protein g per capita per day)`
# ℹ 1 more variable: `Food supply (Fat g per capita per day)` &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>wb_data <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 41
  `Country Name` `Country Code`  year Domestic private health expenditure per …¹
  &lt;chr&gt;          &lt;chr&gt;          &lt;dbl&gt;                                      &lt;dbl&gt;
1 Afghanistan    AFG             1960                                         NA
2 Afghanistan    AFG             1961                                         NA
3 Afghanistan    AFG             1962                                         NA
4 Afghanistan    AFG             1963                                         NA
5 Afghanistan    AFG             1964                                         NA
6 Afghanistan    AFG             1965                                         NA
# ℹ abbreviated name:
#   ¹​`Domestic private health expenditure per capita, PPP  (current international $)`
# ℹ 37 more variables:
#   `Domestic general government health expenditure per capita, PPP (current international $)` &lt;dbl&gt;,
#   `External health expenditure per capita, PPP (current international $)` &lt;dbl&gt;,
#   `Diabetes prevalence (% of population ages 20 to 79)` &lt;dbl&gt;,
#   `Mortality from CVD, cancer, diabetes or CRD between exact ages 30 and 70 (%)` &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
<section id="check-the-countriesregions-present-in-one-column-and-missing-in-the-other" class="level3">
<h3 class="anchored" data-anchor-id="check-the-countriesregions-present-in-one-column-and-missing-in-the-other">Check the countries/regions present in one column and missing in the other</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(wb_data<span class="sc">$</span><span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, food_supply<span class="sc">$</span>Country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Africa Eastern and Southern"                         
  [2] "Africa Western and Central"                          
  [3] "American Samoa"                                      
  [4] "Andorra"                                             
  [5] "Arab World"                                          
  [6] "Aruba"                                               
  [7] "Bahamas, The"                                        
  [8] "British Virgin Islands"                              
  [9] "Brunei Darussalam"                                   
 [10] "Cabo Verde"                                          
 [11] "Caribbean small states"                              
 [12] "Cayman Islands"                                      
 [13] "Central Europe and the Baltics"                      
 [14] "Channel Islands"                                     
 [15] "Congo, Dem. Rep."                                    
 [16] "Congo, Rep."                                         
 [17] "Curacao"                                             
 [18] "Early-demographic dividend"                          
 [19] "East Asia &amp; Pacific"                                 
 [20] "East Asia &amp; Pacific (excluding high income)"         
 [21] "East Asia &amp; Pacific (IDA &amp; IBRD countries)"          
 [22] "Egypt, Arab Rep."                                    
 [23] "Equatorial Guinea"                                   
 [24] "Eritrea"                                             
 [25] "Euro area"                                           
 [26] "Europe &amp; Central Asia"                               
 [27] "Europe &amp; Central Asia (excluding high income)"       
 [28] "Europe &amp; Central Asia (IDA &amp; IBRD countries)"        
 [29] "European Union"                                      
 [30] "Faroe Islands"                                       
 [31] "Fragile and conflict affected situations"            
 [32] "Gambia, The"                                         
 [33] "Gibraltar"                                           
 [34] "Greenland"                                           
 [35] "Guam"                                                
 [36] "Heavily indebted poor countries (HIPC)"              
 [37] "High income"                                         
 [38] "Hong Kong SAR, China"                                
 [39] "IBRD only"                                           
 [40] "IDA &amp; IBRD total"                                    
 [41] "IDA blend"                                           
 [42] "IDA only"                                            
 [43] "IDA total"                                           
 [44] "Iran, Islamic Rep."                                  
 [45] "Isle of Man"                                         
 [46] "Korea, Dem. People's Rep."                           
 [47] "Korea, Rep."                                         
 [48] "Kosovo"                                              
 [49] "Kyrgyz Republic"                                     
 [50] "Lao PDR"                                             
 [51] "Late-demographic dividend"                           
 [52] "Latin America &amp; Caribbean"                           
 [53] "Latin America &amp; Caribbean (excluding high income)"   
 [54] "Latin America &amp; the Caribbean (IDA &amp; IBRD countries)"
 [55] "Least developed countries: UN classification"        
 [56] "Liechtenstein"                                       
 [57] "Low &amp; middle income"                                 
 [58] "Low income"                                          
 [59] "Lower middle income"                                 
 [60] "Macao SAR, China"                                    
 [61] "Marshall Islands"                                    
 [62] "Micronesia, Fed. Sts."                               
 [63] "Middle East &amp; North Africa"                          
 [64] "Middle East &amp; North Africa (excluding high income)"  
 [65] "Middle East &amp; North Africa (IDA &amp; IBRD countries)"   
 [66] "Middle income"                                       
 [67] "Monaco"                                              
 [68] "Northern Mariana Islands"                            
 [69] "Not classified"                                      
 [70] "OECD members"                                        
 [71] "Other small states"                                  
 [72] "Pacific island small states"                         
 [73] "Palau"                                               
 [74] "Post-demographic dividend"                           
 [75] "Pre-demographic dividend"                            
 [76] "Puerto Rico"                                         
 [77] "Russian Federation"                                  
 [78] "San Marino"                                          
 [79] "Singapore"                                           
 [80] "Sint Maarten (Dutch part)"                           
 [81] "Slovak Republic"                                     
 [82] "Small states"                                        
 [83] "Somalia"                                             
 [84] "South Asia"                                          
 [85] "South Asia (IDA &amp; IBRD)"                             
 [86] "St. Kitts and Nevis"                                 
 [87] "St. Lucia"                                           
 [88] "St. Martin (French part)"                            
 [89] "St. Vincent and the Grenadines"                      
 [90] "Sub-Saharan Africa"                                  
 [91] "Sub-Saharan Africa (excluding high income)"          
 [92] "Sub-Saharan Africa (IDA &amp; IBRD countries)"           
 [93] "Syrian Arab Republic"                                
 [94] "Timor-Leste"                                         
 [95] "Tonga"                                               
 [96] "Turkiye"                                             
 [97] "Turks and Caicos Islands"                            
 [98] "Tuvalu"                                              
 [99] "Upper middle income"                                 
[100] "Venezuela, RB"                                       
[101] "Viet Nam"                                            
[102] "Virgin Islands (U.S.)"                               
[103] "West Bank and Gaza"                                  
[104] "Yemen, Rep."                                         
[105] "Anguilla"                                            
[106] "Cook Islands"                                        
[107] "Global Partnership for Education"                    
[108] "Lending category not classified"                     
[109] "Mayotte"                                             
[110] "Montserrat"                                          
[111] "Niue"                                                
[112] "Tokelau"                                             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(food_supply<span class="sc">$</span>Country, wb_data<span class="sc">$</span><span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Africa"                                       
 [2] "Africa (FAO)"                                 
 [3] "Americas (FAO)"                               
 [4] "Asia"                                         
 [5] "Asia (FAO)"                                   
 [6] "Bahamas"                                      
 [7] "Belgium-Luxembourg (FAO)"                     
 [8] "Brunei"                                       
 [9] "Cape Verde"                                   
[10] "Caribbean (FAO)"                              
[11] "Central America (FAO)"                        
[12] "Central Asia (FAO)"                           
[13] "China (FAO)"                                  
[14] "Congo"                                        
[15] "Czechoslovakia"                               
[16] "Democratic Republic of Congo"                 
[17] "East Timor"                                   
[18] "Eastern Africa (FAO)"                         
[19] "Eastern Asia (FAO)"                           
[20] "Eastern Europe (FAO)"                         
[21] "Egypt"                                        
[22] "Ethiopia (former)"                            
[23] "Europe"                                       
[24] "Europe (FAO)"                                 
[25] "European Union (27)"                          
[26] "European Union (27) (FAO)"                    
[27] "Gambia"                                       
[28] "High-income countries"                        
[29] "Hong Kong"                                    
[30] "Iran"                                         
[31] "Kyrgyzstan"                                   
[32] "Land Locked Developing Countries (FAO)"       
[33] "Laos"                                         
[34] "Least Developed Countries (FAO)"              
[35] "Low Income Food Deficit Countries (FAO)"      
[36] "Low-income countries"                         
[37] "Lower-middle-income countries"                
[38] "Macao"                                        
[39] "Melanesia"                                    
[40] "Micronesia (FAO)"                             
[41] "Micronesia (country)"                         
[42] "Middle Africa (FAO)"                          
[43] "Net Food Importing Developing Countries (FAO)"
[44] "North Korea"                                  
[45] "Northern Africa (FAO)"                        
[46] "Northern America (FAO)"                       
[47] "Northern Europe (FAO)"                        
[48] "Oceania"                                      
[49] "Oceania (FAO)"                                
[50] "Polynesia"                                    
[51] "Russia"                                       
[52] "Saint Kitts and Nevis"                        
[53] "Saint Lucia"                                  
[54] "Saint Vincent and the Grenadines"             
[55] "Serbia and Montenegro"                        
[56] "Slovakia"                                     
[57] "Small Island Developing States (FAO)"         
[58] "South America"                                
[59] "South America (FAO)"                          
[60] "South Korea"                                  
[61] "South-eastern Asia (FAO)"                     
[62] "Southern Africa (FAO)"                        
[63] "Southern Asia (FAO)"                          
[64] "Southern Europe (FAO)"                        
[65] "Sudan (former)"                               
[66] "Syria"                                        
[67] "Taiwan"                                       
[68] "Turkey"                                       
[69] "USSR"                                         
[70] "Upper-middle-income countries"                
[71] "Venezuela"                                    
[72] "Vietnam"                                      
[73] "Western Africa (FAO)"                         
[74] "Western Asia (FAO)"                           
[75] "Western Europe (FAO)"                         
[76] "Yemen"                                        
[77] "Yugoslavia"                                   </code></pre>
</div>
</div>
<p>Left joining will keep all wb_data, but measures must be taken to preserve the countries present in the food_supply data that have different spelling in the wb_data. Regions from the food_supply data will be dropped, as our analysis will focus on individual countries, and our parameters of interest are primarily within the wb_data.</p>
</section>
<section id="fix-country-spelling-in-food-supply-data" class="level3">
<h3 class="anchored" data-anchor-id="fix-country-spelling-in-food-supply-data">Fix country spelling in food supply data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>food_supply <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Country =</span> <span class="fu">case_when</span>(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Bahamas"</span> <span class="sc">~</span> <span class="st">"Bahamas, The"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Brunei"</span> <span class="sc">~</span> <span class="st">"Brunei Darussalam"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Cape Verde"</span> <span class="sc">~</span> <span class="st">"Cabo Verde"</span>,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Democratic Republic of Congo"</span> <span class="sc">~</span> <span class="st">"Congo, Dem. Rep."</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Congo"</span> <span class="sc">~</span> <span class="st">"Congo, Rep."</span>,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Egypt"</span> <span class="sc">~</span> <span class="st">"Egypt, Arab Rep."</span>,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Gambia"</span> <span class="sc">~</span> <span class="st">"Gambia, The"</span>,</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Hong Kong"</span> <span class="sc">~</span> <span class="st">"Hong Kong SAR, China"</span>,</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Iran"</span> <span class="sc">~</span> <span class="st">"Iran, Islamic Rep."</span>,</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Kyrgyzstan"</span> <span class="sc">~</span> <span class="st">"Kyrgyz Republic"</span>,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Laos"</span> <span class="sc">~</span> <span class="st">"Lao PDR"</span>,</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Macao"</span> <span class="sc">~</span> <span class="st">"Macao SAR, China"</span>,</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"North Korea"</span> <span class="sc">~</span> <span class="st">"Korea, Dem. People's Rep."</span>,</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"South Korea"</span> <span class="sc">~</span> <span class="st">"Korea, Rep."</span>,</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Russia"</span> <span class="sc">~</span> <span class="st">"Russian Federation"</span>,</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Saint Kitts and Nevis"</span> <span class="sc">~</span> <span class="st">"St. Kitts and Nevis"</span>,</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Saint Lucia"</span> <span class="sc">~</span> <span class="st">"St. Lucia"</span>,</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Saint Vincent and the Grenadines"</span> <span class="sc">~</span> <span class="st">"St. Vincent and the Grenadines"</span>,</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Turkey"</span> <span class="sc">~</span> <span class="st">"Turkiye"</span>,</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Venezuela"</span> <span class="sc">~</span> <span class="st">"Venezuela, RB"</span>,</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Vietnam"</span> <span class="sc">~</span> <span class="st">"Viet Nam"</span>,</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Yemen"</span> <span class="sc">~</span> <span class="st">"Yemen, Rep."</span>,</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Slovakia"</span> <span class="sc">~</span> <span class="st">"Slovak Republic"</span>,</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>      Country <span class="sc">==</span> <span class="st">"Syria"</span> <span class="sc">~</span> <span class="st">"Syrian Arab Republic"</span>,</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>      <span class="at">.default =</span> Country</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="ot">-&gt;</span> food_supply</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="recheck-diff" class="level3">
<h3 class="anchored" data-anchor-id="recheck-diff">Recheck diff</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(wb_data<span class="sc">$</span><span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>, food_supply<span class="sc">$</span>Country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Africa Eastern and Southern"                         
 [2] "Africa Western and Central"                          
 [3] "American Samoa"                                      
 [4] "Andorra"                                             
 [5] "Arab World"                                          
 [6] "Aruba"                                               
 [7] "British Virgin Islands"                              
 [8] "Caribbean small states"                              
 [9] "Cayman Islands"                                      
[10] "Central Europe and the Baltics"                      
[11] "Channel Islands"                                     
[12] "Curacao"                                             
[13] "Early-demographic dividend"                          
[14] "East Asia &amp; Pacific"                                 
[15] "East Asia &amp; Pacific (excluding high income)"         
[16] "East Asia &amp; Pacific (IDA &amp; IBRD countries)"          
[17] "Equatorial Guinea"                                   
[18] "Eritrea"                                             
[19] "Euro area"                                           
[20] "Europe &amp; Central Asia"                               
[21] "Europe &amp; Central Asia (excluding high income)"       
[22] "Europe &amp; Central Asia (IDA &amp; IBRD countries)"        
[23] "European Union"                                      
[24] "Faroe Islands"                                       
[25] "Fragile and conflict affected situations"            
[26] "Gibraltar"                                           
[27] "Greenland"                                           
[28] "Guam"                                                
[29] "Heavily indebted poor countries (HIPC)"              
[30] "High income"                                         
[31] "IBRD only"                                           
[32] "IDA &amp; IBRD total"                                    
[33] "IDA blend"                                           
[34] "IDA only"                                            
[35] "IDA total"                                           
[36] "Isle of Man"                                         
[37] "Kosovo"                                              
[38] "Late-demographic dividend"                           
[39] "Latin America &amp; Caribbean"                           
[40] "Latin America &amp; Caribbean (excluding high income)"   
[41] "Latin America &amp; the Caribbean (IDA &amp; IBRD countries)"
[42] "Least developed countries: UN classification"        
[43] "Liechtenstein"                                       
[44] "Low &amp; middle income"                                 
[45] "Low income"                                          
[46] "Lower middle income"                                 
[47] "Marshall Islands"                                    
[48] "Micronesia, Fed. Sts."                               
[49] "Middle East &amp; North Africa"                          
[50] "Middle East &amp; North Africa (excluding high income)"  
[51] "Middle East &amp; North Africa (IDA &amp; IBRD countries)"   
[52] "Middle income"                                       
[53] "Monaco"                                              
[54] "Northern Mariana Islands"                            
[55] "Not classified"                                      
[56] "OECD members"                                        
[57] "Other small states"                                  
[58] "Pacific island small states"                         
[59] "Palau"                                               
[60] "Post-demographic dividend"                           
[61] "Pre-demographic dividend"                            
[62] "Puerto Rico"                                         
[63] "San Marino"                                          
[64] "Singapore"                                           
[65] "Sint Maarten (Dutch part)"                           
[66] "Small states"                                        
[67] "Somalia"                                             
[68] "South Asia"                                          
[69] "South Asia (IDA &amp; IBRD)"                             
[70] "St. Martin (French part)"                            
[71] "Sub-Saharan Africa"                                  
[72] "Sub-Saharan Africa (excluding high income)"          
[73] "Sub-Saharan Africa (IDA &amp; IBRD countries)"           
[74] "Timor-Leste"                                         
[75] "Tonga"                                               
[76] "Turks and Caicos Islands"                            
[77] "Tuvalu"                                              
[78] "Upper middle income"                                 
[79] "Virgin Islands (U.S.)"                               
[80] "West Bank and Gaza"                                  
[81] "Anguilla"                                            
[82] "Cook Islands"                                        
[83] "Global Partnership for Education"                    
[84] "Lending category not classified"                     
[85] "Mayotte"                                             
[86] "Montserrat"                                          
[87] "Niue"                                                
[88] "Tokelau"                                             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(food_supply<span class="sc">$</span>Country, wb_data<span class="sc">$</span><span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Africa"                                       
 [2] "Africa (FAO)"                                 
 [3] "Americas (FAO)"                               
 [4] "Asia"                                         
 [5] "Asia (FAO)"                                   
 [6] "Belgium-Luxembourg (FAO)"                     
 [7] "Caribbean (FAO)"                              
 [8] "Central America (FAO)"                        
 [9] "Central Asia (FAO)"                           
[10] "China (FAO)"                                  
[11] "Czechoslovakia"                               
[12] "East Timor"                                   
[13] "Eastern Africa (FAO)"                         
[14] "Eastern Asia (FAO)"                           
[15] "Eastern Europe (FAO)"                         
[16] "Ethiopia (former)"                            
[17] "Europe"                                       
[18] "Europe (FAO)"                                 
[19] "European Union (27)"                          
[20] "European Union (27) (FAO)"                    
[21] "High-income countries"                        
[22] "Land Locked Developing Countries (FAO)"       
[23] "Least Developed Countries (FAO)"              
[24] "Low Income Food Deficit Countries (FAO)"      
[25] "Low-income countries"                         
[26] "Lower-middle-income countries"                
[27] "Melanesia"                                    
[28] "Micronesia (FAO)"                             
[29] "Micronesia (country)"                         
[30] "Middle Africa (FAO)"                          
[31] "Net Food Importing Developing Countries (FAO)"
[32] "Northern Africa (FAO)"                        
[33] "Northern America (FAO)"                       
[34] "Northern Europe (FAO)"                        
[35] "Oceania"                                      
[36] "Oceania (FAO)"                                
[37] "Polynesia"                                    
[38] "Serbia and Montenegro"                        
[39] "Small Island Developing States (FAO)"         
[40] "South America"                                
[41] "South America (FAO)"                          
[42] "South-eastern Asia (FAO)"                     
[43] "Southern Africa (FAO)"                        
[44] "Southern Asia (FAO)"                          
[45] "Southern Europe (FAO)"                        
[46] "Sudan (former)"                               
[47] "Taiwan"                                       
[48] "USSR"                                         
[49] "Upper-middle-income countries"                
[50] "Western Africa (FAO)"                         
[51] "Western Asia (FAO)"                           
[52] "Western Europe (FAO)"                         
[53] "Yugoslavia"                                   </code></pre>
</div>
</div>
<p>All of the first list will remain in our dataset.The countries still in the second list are seemingly not present in our wb_data, either due to disputed sovereignty (as is the case with Taiwan), due to being no longer in existence (as is the case with Czechoslovakia, the USSR, and Yugoslavia), or due to being a country grouping (as is the case with Belgium-Luxembourg).</p>
</section>
<section id="join-dfs" class="level3">
<h3 class="anchored" data-anchor-id="join-dfs">Join dfs</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>wb_data <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(food_supply, <span class="at">by =</span> <span class="fu">join_by</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span> <span class="sc">==</span> Country, year <span class="sc">==</span> Year)) <span class="ot">-&gt;</span> full_wb_food_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="review-data-for-export" class="level2">
<h2 class="anchored" data-anchor-id="review-data-for-export">Review data for export</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>full_wb_food_data <span class="sc">|&gt;</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Country Name       Country Code            year     
 Length:17600       Length:17600       Min.   :1960  
 Class :character   Class :character   1st Qu.:1976  
 Mode  :character   Mode  :character   Median :1992  
                                       Mean   :1992  
                                       3rd Qu.:2007  
                                       Max.   :2023  
                                                     
 Domestic private health expenditure per capita, PPP  (current international $)
 Min.   :   2.531                                                              
 1st Qu.:  78.542                                                              
 Median : 219.204                                                              
 Mean   : 392.728                                                              
 3rd Qu.: 500.250                                                              
 Max.   :5739.759                                                              
 NA's   :12536                                                                 
 Domestic general government health expenditure per capita, PPP (current international $)
 Min.   :   0.269                                                                        
 1st Qu.:  60.376                                                                        
 Median : 273.300                                                                        
 Mean   : 757.764                                                                        
 3rd Qu.: 874.184                                                                        
 Max.   :7889.030                                                                        
 NA's   :12536                                                                           
 External health expenditure per capita, PPP (current international $)
 Min.   :  0.000                                                      
 1st Qu.:  1.515                                                      
 Median :  6.799                                                      
 Mean   : 20.325                                                      
 3rd Qu.: 21.360                                                      
 Max.   :592.761                                                      
 NA's   :13195                                                        
 Diabetes prevalence (% of population ages 20 to 79)
 Min.   : 0.000                                     
 1st Qu.: 5.600                                     
 Median : 7.800                                     
 Mean   : 8.648                                     
 3rd Qu.:10.650                                     
 Max.   :30.800                                     
 NA's   :17077                                      
 Mortality from CVD, cancer, diabetes or CRD between exact ages 30 and 70 (%)
 Min.   : 7.30                                                               
 1st Qu.:16.50                                                               
 Median :21.90                                                               
 Mean   :21.97                                                               
 3rd Qu.:25.79                                                               
 Max.   :56.00                                                               
 NA's   :13060                                                               
 Mortality rate, infant (per 1,000 live births)
 Min.   :  1.30                                
 1st Qu.: 14.20                                
 Median : 33.50                                
 Mean   : 47.65                                
 3rd Qu.: 68.80                                
 Max.   :272.00                                
 NA's   :4834                                  
 Mortality rate, under-5 (per 1,000) Population, total   Population, male   
 Min.   :  1.50                      Min.   :2.646e+03   Min.   :1.258e+03  
 1st Qu.: 16.80                      1st Qu.:9.328e+05   1st Qu.:4.697e+05  
 Median : 42.37                      Median :6.414e+06   Median :3.178e+06  
 Mean   : 71.04                      Mean   :1.984e+08   Mean   :9.968e+07  
 3rd Qu.:101.47                      3rd Qu.:4.033e+07   3rd Qu.:2.009e+07  
 Max.   :428.70                      Max.   :8.025e+09   Max.   :4.033e+09  
 NA's   :4738                        NA's   :926         NA's   :926        
 Population, female 
 Min.   :1.387e+03  
 1st Qu.:4.592e+05  
 Median :3.227e+06  
 Mean   :9.871e+07  
 3rd Qu.:2.030e+07  
 Max.   :3.992e+09  
 NA's   :926        
 Total alcohol consumption per capita (liters of pure alcohol, projected estimates, 15+ years of age)
 Min.   : 0.000                                                                                      
 1st Qu.: 2.064                                                                                      
 Median : 4.977                                                                                      
 Mean   : 5.473                                                                                      
 3rd Qu.: 8.422                                                                                      
 Max.   :19.047                                                                                      
 NA's   :16449                                                                                       
 Prevalence of current tobacco use (% of adults)
 Min.   : 3.50                                  
 1st Qu.:14.90                                  
 Median :23.75                                  
 Mean   :23.66                                  
 3rd Qu.:30.67                                  
 Max.   :68.50                                  
 NA's   :16158                                  
 Death rate, crude (per 1,000 people)
 Min.   :  0.795                     
 1st Qu.:  6.929                     
 Median :  9.106                     
 Mean   : 10.410                     
 3rd Qu.: 12.264                     
 Max.   :103.534                     
 NA's   :1570                        
 Literacy rate, adult total (% of people ages 15 and above)
 Min.   :  5.405                                           
 1st Qu.: 60.877                                           
 Median : 79.036                                           
 Mean   : 75.605                                           
 3rd Qu.: 93.030                                           
 Max.   :100.000                                           
 NA's   :15030                                             
 Immunization, BCG (% of one-year-old children)
 Min.   : 0.00                                 
 1st Qu.:77.00                                 
 Median :91.00                                 
 Mean   :82.88                                 
 3rd Qu.:97.00                                 
 Max.   :99.00                                 
 NA's   :9834                                  
 Immunization, DPT (% of children ages 12-23 months)
 Min.   : 0.00                                      
 1st Qu.:70.00                                      
 Median :87.00                                      
 Mean   :78.61                                      
 3rd Qu.:95.00                                      
 Max.   :99.00                                      
 NA's   :8080                                       
 Immunization, HepB3 (% of one-year-old children)
 Min.   : 0.00                                   
 1st Qu.:68.00                                   
 Median :87.07                                   
 Mean   :74.49                                   
 3rd Qu.:95.00                                   
 Max.   :99.00                                   
 NA's   :11646                                   
 Immunization, Hib3 (% of children ages 12-23 months)
 Min.   : 0.00                                       
 1st Qu.:65.00                                       
 Median :88.00                                       
 Mean   :72.82                                       
 3rd Qu.:95.00                                       
 Max.   :99.00                                       
 NA's   :12592                                       
 Immunization, measles (% of children ages 12-23 months)
 Min.   : 0.00                                          
 1st Qu.:67.00                                          
 Median :85.00                                          
 Mean   :77.39                                          
 3rd Qu.:94.00                                          
 Max.   :99.00                                          
 NA's   :8203                                           
 Immunization, measles second dose (% of children by the nationally recommended age)
 Min.   : 0.00                                                                      
 1st Qu.:65.19                                                                      
 Median :86.00                                                                      
 Mean   :75.16                                                                      
 3rd Qu.:95.00                                                                      
 Max.   :99.00                                                                      
 NA's   :13583                                                                      
 Immunization, Pol3 (% of one-year-old children)
 Min.   : 0.00                                  
 1st Qu.:71.00                                  
 Median :88.00                                  
 Mean   :79.18                                  
 3rd Qu.:95.00                                  
 Max.   :99.00                                  
 NA's   :8079                                   
 GDP per capita, PPP (current international $)
 Min.   :   257.6                             
 1st Qu.:  3080.9                             
 Median :  8318.7                             
 Mean   : 15669.7                             
 3rd Qu.: 20885.3                             
 Max.   :163542.8                             
 NA's   :9348                                 
 GDP, PPP (current international $) GNI, PPP (current international $)
 Min.   :1.466e+07                  Min.   :2.876e+07                 
 1st Qu.:1.238e+10                  1st Qu.:1.295e+10                 
 Median :8.103e+10                  Median :7.818e+10                 
 Mean   :2.992e+12                  Mean   :3.035e+12                 
 3rd Qu.:8.240e+11                  3rd Qu.:8.323e+11                 
 Max.   :1.847e+14                  Max.   :1.834e+14                 
 NA's   :9348                       NA's   :9556                      
 GNI per capita, PPP (current international $)
 Min.   :   270                               
 1st Qu.:  3125                               
 Median :  8100                               
 Mean   : 14950                               
 3rd Qu.: 19652                               
 Max.   :152930                               
 NA's   :9556                                 
 Adjusted net national income (current US$) Consumer price index (2010 = 100)
 Min.   :-7.930e+07                         Min.   :    0.00                 
 1st Qu.: 3.967e+09                         1st Qu.:   18.38                 
 Median : 3.148e+10                         Median :   65.58                 
 Mean   : 1.272e+12                         Mean   :   92.56                 
 3rd Qu.: 3.134e+11                         3rd Qu.:  103.41                 
 Max.   : 7.689e+13                         Max.   :38796.56                 
 NA's   :8051                               NA's   :8731                     
 Unemployment, total (% of total labor force) (national estimate)
 Min.   : 0.039                                                  
 1st Qu.: 4.079                                                  
 Median : 6.548                                                  
 Mean   : 7.867                                                  
 3rd Qu.:10.003                                                  
 Max.   :57.000                                                  
 NA's   :11998                                                   
 Unemployment, total (% of total labor force) (modeled ILO estimate)
 Min.   : 0.100                                                     
 1st Qu.: 4.109                                                     
 Median : 6.347                                                     
 Mean   : 7.901                                                     
 3rd Qu.:10.395                                                     
 Max.   :38.800                                                     
 NA's   :9848                                                       
 Urban population (% of total population)
 Min.   :  2.077                         
 1st Qu.: 30.098                         
 Median : 48.932                         
 Mean   : 50.374                         
 3rd Qu.: 69.716                         
 Max.   :100.000                         
 NA's   :768                             
 Human Capital Index (HCI): Learning-Adjusted Years of School, Total
 Min.   : 2.280                                                     
 1st Qu.: 5.730                                                     
 Median : 7.860                                                     
 Mean   : 7.895                                                     
 3rd Qu.:10.290                                                     
 Max.   :12.900                                                     
 NA's   :17443                                                      
 Human Capital Index (HCI): Learning-Adjusted Years of School, Male
 Min.   : 2.350                                                    
 1st Qu.: 5.720                                                    
 Median : 7.820                                                    
 Mean   : 7.882                                                    
 3rd Qu.:10.678                                                    
 Max.   :12.810                                                    
 NA's   :17474                                                     
 Human Capital Index (HCI): Learning-Adjusted Years of School, Female
 Min.   : 2.220                                                      
 1st Qu.: 5.690                                                      
 Median : 8.140                                                      
 Mean   : 8.015                                                      
 3rd Qu.:10.860                                                      
 Max.   :13.010                                                      
 NA's   :17473                                                       
 Prevalence of overweight (% of adults)
 Min.   : 4.6                          
 1st Qu.:20.9                          
 Median :38.1                          
 Mean   :36.6                          
 3rd Qu.:50.6                          
 Max.   :88.5                          
 NA's   :7856                          
 Prevalence of underweight, weight for age (% of children under 5)
 Min.   : 0.000                                                   
 1st Qu.: 4.418                                                   
 Median :12.800                                                   
 Mean   :14.716                                                   
 3rd Qu.:21.475                                                   
 Max.   :66.800                                                   
 NA's   :16254                                                    
 Life expectancy at birth, female (years)
 Min.   :12.72                           
 1st Qu.:59.33                           
 Median :69.92                           
 Mean   :67.09                           
 3rd Qu.:75.97                           
 Max.   :88.06                           
 NA's   :1728                            
 Life expectancy at birth, male (years) Life expectancy at birth, total (years)
 Min.   :10.05                          Min.   :11.99                          
 1st Qu.:55.26                          1st Qu.:57.30                          
 Median :64.30                          Median :67.16                          
 Mean   :62.08                          Mean   :64.52                          
 3rd Qu.:69.84                          3rd Qu.:72.73                          
 Max.   :83.35                          Max.   :85.53                          
 NA's   :1728                           NA's   :1728                           
 Food supply (kcal per capita per day)
 Min.   :1317                         
 1st Qu.:2177                         
 Median :2561                         
 Mean   :2598                         
 3rd Qu.:3021                         
 Max.   :4090                         
 NA's   :7831                         
 Food supply (Protein g per capita per day)
 Min.   : 28.59                            
 1st Qu.: 54.73                            
 Median : 69.76                            
 Mean   : 73.20                            
 3rd Qu.: 91.27                            
 Max.   :148.72                            
 NA's   :7831                              
 Food supply (Fat g per capita per day)
 Min.   : 11.19                        
 1st Qu.: 45.44                        
 Median : 65.58                        
 Mean   : 74.18                        
 3rd Qu.: 98.30                        
 Max.   :184.51                        
 NA's   :7831                          </code></pre>
</div>
</div>
<section id="reclassify-some-columns" class="level3">
<h3 class="anchored" data-anchor-id="reclassify-some-columns">Reclassify some columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>full_wb_food_data <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.factor</span>(<span class="st">`</span><span class="at">Country Name</span><span class="st">`</span>), <span class="st">`</span><span class="at">Country Code</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">as.factor</span>(<span class="st">`</span><span class="at">Country Code</span><span class="st">`</span>), <span class="at">year =</span> <span class="fu">as.integer</span>(year)) <span class="ot">-&gt;</span> full_wb_food_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-metadata-df" class="level3">
<h3 class="anchored" data-anchor-id="create-metadata-df">Create metadata df</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>full_wb_food_data <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>() <span class="sc">|&gt;</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.vector.data.frame</span>() <span class="ot">-&gt;</span> vector_colnames</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">original_variable_names =</span> vector_colnames, <span class="at">simplified_names =</span> <span class="fu">c</span>(</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"country"</span>,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"country_code"</span>,</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"year"</span>,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"private_health_exppc_ppp"</span>,</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"government_health_exppc_ppp"</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"external_health_exppc_ppp"</span>,</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"diabetes_rate"</span>,</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"disease_mortality_rate"</span>,</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"infant_mortality_rate"</span>,</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"under_5_mortality_rate"</span>,</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"total_population"</span>,</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"male_population"</span>,</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"female_population"</span>,</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"total_alcohol_consumption_per_capita"</span>,</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tobacco_use_rate"</span>,</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"crude_deaths_per_thousand"</span>,</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adult_literacy_rate"</span>,</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bcg_immunization_rate"</span>,</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dpt_immunization_rate"</span>,</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>  <span class="st">"hepb3_immunization_rate"</span>,</span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"hib3_immunization_rate"</span>,</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"measles_immunization_rate"</span>,</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"measles_second_dose_immunization_rate"</span>,</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"pol3_immunization_rate"</span>,</span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gdp_per_capita_ppp"</span>,</span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gdp_ppp"</span>,</span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gni_ppp"</span>,</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"gni_per_capita_ppp"</span>,</span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adjusted_net_national_income_usd"</span>,</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>  <span class="st">"consumer_price_index"</span>,</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>  <span class="st">"unemployment_rate_national_estimate"</span>,</span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">"unemployment_rate_ilo_estimate"</span>,</span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>  <span class="st">"urban_population_rate"</span>,</span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a>  <span class="st">"average_years_of_schooling"</span>,</span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>  <span class="st">"average_yeras_of_schooling_male"</span>,</span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>  <span class="st">"average_years_of_schooling_female"</span>,</span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>  <span class="st">"obesity_rate_adults"</span>,</span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>  <span class="st">"underweight_rate_children_under_5"</span>,</span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>  <span class="st">"life_expectancy_at_birth_female"</span>,</span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"life_expectancy_at_birth_male"</span>,</span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"life_expectancy_at_birth"</span>,</span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"kilocalorie_supply_per_capita"</span>,</span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"protein_g_supply_per_capita"</span>,</span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>  <span class="st">"fat_g_supply_per_capita"</span></span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a>)) <span class="ot">-&gt;</span> metadata</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rename-columns" class="level3">
<h3 class="anchored" data-anchor-id="rename-columns">Rename columns</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(full_wb_food_data) <span class="ot">&lt;-</span> metadata<span class="sc">$</span>simplified_names</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(full_wb_food_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 44
  country     country_code  year private_health_exppc_ppp government_health_ex…¹
  &lt;fct&gt;       &lt;fct&gt;        &lt;int&gt;                    &lt;dbl&gt;                  &lt;dbl&gt;
1 Afghanistan AFG           1960                       NA                     NA
2 Afghanistan AFG           1961                       NA                     NA
3 Afghanistan AFG           1962                       NA                     NA
4 Afghanistan AFG           1963                       NA                     NA
5 Afghanistan AFG           1964                       NA                     NA
6 Afghanistan AFG           1965                       NA                     NA
# ℹ abbreviated name: ¹​government_health_exppc_ppp
# ℹ 39 more variables: external_health_exppc_ppp &lt;dbl&gt;, diabetes_rate &lt;dbl&gt;,
#   disease_mortality_rate &lt;dbl&gt;, infant_mortality_rate &lt;dbl&gt;,
#   under_5_mortality_rate &lt;dbl&gt;, total_population &lt;dbl&gt;,
#   male_population &lt;dbl&gt;, female_population &lt;dbl&gt;,
#   total_alcohol_consumption_per_capita &lt;dbl&gt;, tobacco_use_rate &lt;dbl&gt;,
#   crude_deaths_per_thousand &lt;dbl&gt;, adult_literacy_rate &lt;dbl&gt;, …</code></pre>
</div>
</div>
</section>
</section>
<section id="recode-country-names-to-match-rnaturalearth-shapefile" class="level2">
<h2 class="anchored" data-anchor-id="recode-country-names-to-match-rnaturalearth-shapefile">Recode country names to match rnaturalearth shapefile</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>mapping_data <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>mapping_data <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(sovereignt) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  sovereignt
1   Zimbabwe
2     Zambia
3      Yemen
4    Vietnam
5  Venezuela
6    Vatican</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>full_wb_food_data <span class="ot">&lt;-</span> full_wb_food_data <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">country_recoded =</span> <span class="fu">as.factor</span>(<span class="fu">case_when</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Bahamas, The"</span> <span class="sc">~</span> <span class="st">"Bahamas"</span>,</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Brunei Darussalam"</span> <span class="sc">~</span> <span class="st">"Brunei"</span>,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Congo, Dem. Rep."</span> <span class="sc">~</span> <span class="st">"Democratic Republic of the Congo"</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Congo, Rep."</span> <span class="sc">~</span> <span class="st">"Republic of Congo"</span>,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Cote d'Ivoire"</span> <span class="sc">~</span> <span class="st">"Côte d'Ivoire"</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Curacao"</span> <span class="sc">~</span> <span class="st">"Curaçao"</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Egypt, Arab Rep."</span> <span class="sc">~</span> <span class="st">"Egypt"</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Equatorial Guinea"</span> <span class="sc">~</span> <span class="st">"Equatorial Guinea"</span>,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Gambia, The"</span> <span class="sc">~</span> <span class="st">"Gambia"</span>,</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Hong Kong SAR, China"</span> <span class="sc">~</span> <span class="st">"Hong Kong"</span>,</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Iran, Islamic Rep."</span> <span class="sc">~</span> <span class="st">"Iran"</span>,</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Dem. People's Rep."</span> <span class="sc">~</span> <span class="st">"North Korea"</span>,</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Korea, Rep."</span> <span class="sc">~</span> <span class="st">"South Korea"</span>,</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Kyrgyz Republic"</span> <span class="sc">~</span> <span class="st">"Kyrgyzstan"</span>,</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Lao PDR"</span> <span class="sc">~</span> <span class="st">"Laos"</span>,</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Macao SAR, China"</span> <span class="sc">~</span> <span class="st">"Macau"</span>,</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Micronesia, Fed. Sts."</span> <span class="sc">~</span> <span class="st">"Micronesia"</span>,</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Russian Federation"</span> <span class="sc">~</span> <span class="st">"Russia"</span>,</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Sao Tome and Principe"</span> <span class="sc">~</span> <span class="st">"São Tomé and Príncipe"</span>,</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Sint Maarten (Dutch part)"</span> <span class="sc">~</span> <span class="st">"Sint Maarten"</span>,</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Slovak Republic"</span> <span class="sc">~</span> <span class="st">"Slovakia"</span>,</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Solomon Islands"</span> <span class="sc">~</span> <span class="st">"Solomon Islands"</span>,</span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"South Sudan"</span> <span class="sc">~</span> <span class="st">"South Sudan"</span>,</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"St. Lucia"</span> <span class="sc">~</span> <span class="st">"Saint Lucia"</span>,</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"St. Martin (French part)"</span> <span class="sc">~</span> <span class="st">"Saint Martin"</span>,</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"St. Vincent and the Grenadines"</span> <span class="sc">~</span> <span class="st">"Saint Vincent and the Grenadines"</span>,</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Syrian Arab Republic"</span> <span class="sc">~</span> <span class="st">"Syria"</span>,</span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Turkiye"</span> <span class="sc">~</span> <span class="st">"Turkey"</span>,</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"United States"</span> <span class="sc">~</span> <span class="st">"United States of America"</span>,</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Venezuela, RB"</span> <span class="sc">~</span> <span class="st">"Venezuela"</span>,</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Viet Nam"</span> <span class="sc">~</span> <span class="st">"Vietnam"</span>,</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Virgin Islands (U.S.)"</span> <span class="sc">~</span> <span class="st">"United States Virgin Islands"</span>,</span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"West Bank and Gaza"</span> <span class="sc">~</span> <span class="st">"Palestine"</span>,</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true" tabindex="-1"></a>    country <span class="sc">==</span> <span class="st">"Yemen, Rep."</span> <span class="sc">~</span> <span class="st">"Yemen"</span>,</span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> country <span class="co"># default case if no match</span></span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country, country_recoded, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="update-metadata" class="level3">
<h3 class="anchored" data-anchor-id="update-metadata">Update metadata</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>new_row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">original_variable_names =</span> <span class="st">"country recoded"</span>,</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">simplified_names =</span> <span class="st">"country recoded"</span>,</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>metadata <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  metadata[<span class="dv">1</span>, ],        </span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  new_row,              </span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  metadata[<span class="dv">2</span><span class="sc">:</span><span class="fu">nrow</span>(metadata), ]</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="export-data" class="level2">
<h2 class="anchored" data-anchor-id="export-data">Export Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(full_wb_food_data,<span class="st">"data/merged_full_dataset.csv"</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(metadata, <span class="st">"data/metadata.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>